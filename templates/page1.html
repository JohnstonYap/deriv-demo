<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QB Bot - UI/UX Inspector</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>
    <div class="container config-container">
        <!-- Logo and Branding -->
        <div class="logo-section">
            <div class="logo-icon">
                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="QB Bot Logo" class="logo-image" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <svg width="80" height="80" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
                    <path d="M30 5L35 15L45 10L40 20L50 25L40 30L45 40L35 35L30 45L25 35L15 40L20 30L10 25L20 20L15 10L25 15L30 5Z" fill="#fbbf24"/>
                </svg>
            </div>
            <h1 class="logo-text">QB Bot</h1>
            <h3 class="tagline">UI/UX Inspector</h3>
            <div class="subtitle">Protect your front door with AI that catches signup friction before you lose a single lead.</div>
        </div>

        <!-- Configuration Form -->
        <div class="main-config-card">
            <form action="{{ url_for('validate_config') }}" method="POST" id="configForm">
                
                <!-- URL Input -->
                <div class="url-input-section">
                    <label for="urlInput" class="main-label">Test a static public URL *</label>
                    <div class="url-input-wrapper">
                        <input 
                            type="url" 
                            id="urlInput" 
                            name="url" 
                            placeholder="https://example.com" 
                            required 
                        />
                        <button type="submit" class="url-submit-btn" id="submitBtn">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Report Information -->
                <div class="config-sections">
                    <div class="config-column">
                        <h4 class="column-title">LOCATIONS</h4>
                        
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="environment" value="Web" required>
                                <span class="radio-custom"></span>
                                <span class="radio-label">Web</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="environment" value="iOS">
                                <span class="radio-custom"></span>
                                <span class="radio-label">iOS (Real)</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="environment" value="Android">
                                <span class="radio-custom"></span>
                                <span class="radio-label">Android</span>
                            </label>
                        </div>

                        <div class="input-group">
                            <label for="resolution">Resolution</label>
                            <select id="resolution" name="resolution" required>
                                <option value="">Select Resolution</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label for="testDate">Test Date</label>
                            <input type="text" id="testDate" name="test_date" value="{{ today }}" required />
                        </div>
                    </div>

                    <div class="config-column">
                        <h4 class="column-title">SPEED METHOD</h4>
                        
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="tester_level" value="Newbie" required>
                                <span class="radio-custom"></span>
                                <span class="radio-label">Newbie</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="tester_level" value="Expert">
                                <span class="radio-custom"></span>
                                <span class="radio-label">Expert</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="tester_level" value="Custom">
                                <span class="radio-custom"></span>
                                <span class="radio-label">Custom</span>
                            </label>
                        </div>

                        <div class="input-group" id="testerCustomGroup" style="display: none;">
                            <input type="text" id="testerCustom" name="tester_custom" placeholder="Enter custom level" />
                        </div>
                    </div>

                    <div class="config-column">
                        <h4 class="column-title">DEVICE RENDER</h4>
                        
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="browser" value="Chrome" required>
                                <span class="radio-custom"></span>
                                <span class="radio-label">Chrome</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="browser" value="Firefox">
                                <span class="radio-custom"></span>
                                <span class="radio-label">Firefox</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="browser" value="Safari">
                                <span class="radio-custom"></span>
                                <span class="radio-label">Safari</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="browser" value="Edge">
                                <span class="radio-custom"></span>
                                <span class="radio-label">Edge</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="browser" value="Others">
                                <span class="radio-custom"></span>
                                <span class="radio-label">Others</span>
                            </label>
                        </div>

                        <div class="input-group" id="browserOtherGroup" style="display: none;">
                            <input type="text" id="browserOther" name="browser_other" placeholder="Enter browser name" />
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <!-- Testing History -->
        {% if history %}
        <div class="history-section">
            <h2 class="history-title">Recent Tests</h2>
            <div class="history-list">
                {% for test in history[:5] %}
                <div class="history-item">
                    <div class="history-score">
                        <svg class="score-ring" width="60" height="60">
                            <circle cx="30" cy="30" r="26" fill="none" stroke="#fef3c7" stroke-width="4"/>
                            <circle cx="30" cy="30" r="26" fill="none" stroke="#10b981" stroke-width="4" 
                                    stroke-dasharray="{{ (test.score / 100) * 163.36 }} 163.36" 
                                    transform="rotate(-90 30 30)" 
                                    stroke-linecap="round"
                                    class="score-progress"/>
                        </svg>
                        <span class="score-number">{{ test.score }}</span>
                    </div>
                    <div class="history-details">
                        <div class="history-url">{{ test.url }}</div>
                        <div class="history-meta">
                            <span class="history-date">{{ test.date }}</span>
                            <span class="history-env">{{ test.environment }}</span>
                            <span class="history-tests">{{ test.passed_tests }}/{{ test.total_tests }} passed</span>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="{{ url_for('static', filename='js/page1.js') }}"></script>
</body>
</html>